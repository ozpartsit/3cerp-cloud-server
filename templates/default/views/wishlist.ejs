<div class="section login-page-in">
     <div class="container">
          <!-- Wishlist Content -->
          <form action="#" method="post">
               <div class="wishlist-table table-content text-nowrap table-responsive">
                    <table class="table align-middle">
                         <thead class="thead-bg">
                              <tr>
                                   <th class="product-name text-start alt-font" colspan="3">
                                        <%=  i18n.__('locales.favorites-view.headers.product') %>
                                   </th>
                                   <th class="product-price text-center alt-font">
                                        <%=  i18n.__('locales.favorites-view.headers.price') %>
                                   </th>
                                   <th class="product-subtotal text-center alt-font">
                                        <%=  i18n.__('locales.favorites-view.headers.add-cart') %>
                                   </th>
                              </tr>
                         </thead>
                         <tbody id="table_wishlist" aria-live="polite">
                              <% if(data.content.length > 0) { %> 
                                   <% data.content.forEach((item, index) => { %> 
                                        <% if(item.item) { %>
                                             <tr>
                                                  <td class="product-remove text-center">
                                                       <a href="javascript:void(0)" role="button" aria-label="Remove <%= item.item.name %> from wishlist"
                                                            data-bs-toggle="tooltip" data-bs-placement="top">
                                                            <i class="cp cp-times cursor-pointer" name="remove_from_favorites" id="<%= item.item._id %>"></i>
                                                       </a>
                                                  </td>
                                                  <td class="product-thumbnail text-center">
                                                       <a href="<%= data.page.host + '/item/' + item.item.urlComponent %>" aria-label="<%= item.item.name %>">
                                                            <% if(item.item.images[0]) { %>
                                                            <img class="blur-up rounded-3 lazyload border-1"
                                                                 src="<%= item.item.images[0].fullPath %>"
                                                                 alt="<%= item.item.images[0].name %>"
                                                                 title="<%= item.item.name %>"
                                                                 loading="lazy"
                                                                 width="100" />
                                                            <% } else { %>
                                                            <img class="blur-up rounded-3 lazyload border-1"
                                                                 src="assets/images/products/110x110.jpg"
                                                                 data-src="assets/images/products/110x110.jpg"
                                                                 alt="Placeholder image"
                                                                 title="Placeholder image"
                                                                 loading="lazy"
                                                                 width="100" />
                                                            <% } %>
                                                       </a>
                                                  </td>
                                                  <td class="product-name">
                                                       <div class="mb-0">
                                                            <a href="<%= data.page.host + '/item/' + item.item.urlComponent %>" aria-label="<%= item.item.name %>">
                                                                 <%= item.item.name %>
                                                            </a>
                                                            <p style="font-size: 13px">
                                                                 <%= item.item.description %>
                                                            </p>
                                                       </div>
                                                  </td>
                                                  <td class="product-price text-center">
                                                       <span class="amount fw-500" aria-label="Price: <%= item.item.priceFormat %>">
                                                            <%= item.item.priceFormat %>
                                                       </span>
                                                  </td>
                                                  <td class="product-subtotal text-center">
                                                       <button name="add_to_cart" type="button" class="btn rounded-3 text-nowrap soldOutBtn"
                                                            id="<%= item.item._id %>" aria-label="Add <%= item.item.name %> to cart">
                                                            <%=  i18n.__('locales.favorites-view.rows.btn-add-cart') %>
                                                       </button>
                                                  </td>
                                             </tr>
                                        <% } %>
                                   <% }) %>
                              <% } else { %>
                                   <tr>
                                        <td colspan="5" class="text-center" role="alert" aria-live="assertive">
                                             <%= i18n.__('locales.favorites-view.messages.no-items') %>
                                        </td>
                                   </tr>
                              <% } %> 
                         </tbody>
                    </table>
               </div>
          </form>
          <!-- End Wishlist Content -->
     </div>
</div>

<script>
     const HTML_table_wishlist = document.querySelector("#table_wishlist");

     if (HTML_table_wishlist) {
          HTML_table_wishlist.addEventListener("click", async (e) => {
               let product = e.target;
               let name = product.getAttribute('name');
               let id = product.id;

               if (name === "add_to_cart" && id) {
                    await add_to_cart(id, 1);
               }

               if (name === 'remove_from_favorites' && id) {
                    await remove_from_favorites(id);
               }
          });
     }
</script>
